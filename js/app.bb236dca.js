(function(){var t={6700:function(t,e,s){var a={"./af":2398,"./af.js":2398,"./ar":4207,"./ar-dz":3382,"./ar-dz.js":3382,"./ar-kw":6525,"./ar-kw.js":6525,"./ar-ly":7098,"./ar-ly.js":7098,"./ar-ma":6483,"./ar-ma.js":6483,"./ar-sa":3961,"./ar-sa.js":3961,"./ar-tn":7401,"./ar-tn.js":7401,"./ar.js":4207,"./az":903,"./az.js":903,"./be":1174,"./be.js":1174,"./bg":4615,"./bg.js":4615,"./bm":225,"./bm.js":225,"./bn":9751,"./bn-bd":544,"./bn-bd.js":544,"./bn.js":9751,"./bo":6894,"./bo.js":6894,"./br":8566,"./br.js":8566,"./bs":959,"./bs.js":959,"./ca":2683,"./ca.js":2683,"./cs":4231,"./cs.js":4231,"./cv":999,"./cv.js":999,"./cy":4302,"./cy.js":4302,"./da":3601,"./da.js":3601,"./de":5509,"./de-at":2479,"./de-at.js":2479,"./de-ch":5948,"./de-ch.js":5948,"./de.js":5509,"./dv":9838,"./dv.js":9838,"./el":5113,"./el.js":5113,"./en-au":7377,"./en-au.js":7377,"./en-ca":9626,"./en-ca.js":9626,"./en-gb":5912,"./en-gb.js":5912,"./en-ie":2931,"./en-ie.js":2931,"./en-il":2243,"./en-il.js":2243,"./en-in":9779,"./en-in.js":9779,"./en-nz":9813,"./en-nz.js":9813,"./en-sg":4318,"./en-sg.js":4318,"./eo":4957,"./eo.js":4957,"./es":9243,"./es-do":7409,"./es-do.js":7409,"./es-mx":5188,"./es-mx.js":5188,"./es-us":6927,"./es-us.js":6927,"./es.js":9243,"./et":7731,"./et.js":7731,"./eu":1072,"./eu.js":1072,"./fa":9462,"./fa.js":9462,"./fi":3368,"./fi.js":3368,"./fil":3626,"./fil.js":3626,"./fo":6421,"./fo.js":6421,"./fr":974,"./fr-ca":7780,"./fr-ca.js":7780,"./fr-ch":9719,"./fr-ch.js":9719,"./fr.js":974,"./fy":8373,"./fy.js":8373,"./ga":3861,"./ga.js":3861,"./gd":4896,"./gd.js":4896,"./gl":739,"./gl.js":739,"./gom-deva":6737,"./gom-deva.js":6737,"./gom-latn":1979,"./gom-latn.js":1979,"./gu":2001,"./gu.js":2001,"./he":9671,"./he.js":9671,"./hi":2038,"./hi.js":2038,"./hr":1228,"./hr.js":1228,"./hu":87,"./hu.js":87,"./hy-am":3569,"./hy-am.js":3569,"./id":1977,"./id.js":1977,"./is":6853,"./is.js":6853,"./it":7859,"./it-ch":5626,"./it-ch.js":5626,"./it.js":7859,"./ja":4123,"./ja.js":4123,"./jv":6457,"./jv.js":6457,"./ka":638,"./ka.js":638,"./kk":6823,"./kk.js":6823,"./km":9493,"./km.js":9493,"./kn":1288,"./kn.js":1288,"./ko":9663,"./ko.js":9663,"./ku":805,"./ku.js":805,"./ky":7550,"./ky.js":7550,"./lb":6272,"./lb.js":6272,"./lo":9135,"./lo.js":9135,"./lt":1452,"./lt.js":1452,"./lv":5782,"./lv.js":5782,"./me":2181,"./me.js":2181,"./mi":258,"./mi.js":258,"./mk":5715,"./mk.js":5715,"./ml":538,"./ml.js":538,"./mn":3086,"./mn.js":3086,"./mr":5663,"./mr.js":5663,"./ms":5100,"./ms-my":2663,"./ms-my.js":2663,"./ms.js":5100,"./mt":880,"./mt.js":880,"./my":9099,"./my.js":9099,"./nb":8709,"./nb.js":8709,"./ne":2201,"./ne.js":2201,"./nl":1016,"./nl-be":1681,"./nl-be.js":1681,"./nl.js":1016,"./nn":5330,"./nn.js":5330,"./oc-lnc":7132,"./oc-lnc.js":7132,"./pa-in":251,"./pa-in.js":251,"./pl":3948,"./pl.js":3948,"./pt":9836,"./pt-br":8831,"./pt-br.js":8831,"./pt.js":9836,"./ro":8443,"./ro.js":8443,"./ru":4,"./ru.js":4,"./sd":4510,"./sd.js":4510,"./se":3148,"./se.js":3148,"./si":542,"./si.js":542,"./sk":7637,"./sk.js":7637,"./sl":5852,"./sl.js":5852,"./sq":611,"./sq.js":611,"./sr":242,"./sr-cyrl":302,"./sr-cyrl.js":302,"./sr.js":242,"./ss":1367,"./ss.js":1367,"./sv":2927,"./sv.js":2927,"./sw":5240,"./sw.js":5240,"./ta":2692,"./ta.js":2692,"./te":2132,"./te.js":2132,"./tet":8300,"./tet.js":8300,"./tg":7211,"./tg.js":7211,"./th":4050,"./th.js":4050,"./tk":3849,"./tk.js":3849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":3650,"./tlh.js":3650,"./tr":4195,"./tr.js":4195,"./tzl":5529,"./tzl.js":5529,"./tzm":7520,"./tzm-latn":298,"./tzm-latn.js":298,"./tzm.js":7520,"./ug-cn":4134,"./ug-cn.js":4134,"./uk":5456,"./uk.js":5456,"./ur":5679,"./ur.js":5679,"./uz":9277,"./uz-latn":6446,"./uz-latn.js":6446,"./uz.js":9277,"./vi":3992,"./vi.js":3992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":2899,"./yo.js":2899,"./zh-cn":4017,"./zh-cn.js":4017,"./zh-hk":4831,"./zh-hk.js":4831,"./zh-mo":2881,"./zh-mo.js":2881,"./zh-tw":57,"./zh-tw.js":57};function n(t){var e=i(t);return s(e)}function i(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id=6700},1176:function(t,e,s){"use strict";var a=s(8935),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("keep-alive",[t.$route.meta.needKeep?s("router-view"):t._e()],1),t.$route.meta.needKeep?t._e():s("router-view")],1)},i=[],o={},r=o,l=s(1001),c=(0,l.Z)(r,n,i,!1,null,null,null),u=c.exports,h=(s(6888),s(8256)),d=s(2809),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"登录"}}),s("van-form",{on:{submit:t.onSubmit}},[s("van-field",{attrs:{label:"手机号",placeholder:"手机号",rules:t.rules.mobile},model:{value:t.info.mobile,callback:function(e){t.$set(t.info,"mobile",e)},expression:"info.mobile"}}),s("van-field",{attrs:{label:"验证码",placeholder:"验证码",rules:t.rules.code},model:{value:t.info.code,callback:function(e){t.$set(t.info,"code",e)},expression:"info.code"}}),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",loading:t.isLoading,"loading-text":"登录中..."}},[t._v("登录")])],1)],1)],1)},v=[],p=s(6166),f=s.n(p),g=s(4665);const _="hmtt81_token",b=t=>{localStorage.setItem(_,JSON.stringify(t))},y=()=>JSON.parse(localStorage.getItem(_)),j=()=>{localStorage.removeItem(_)};a.Z.use(g.ZP);var w=new g.ZP.Store({state:{tokenObj:y()||{},userInfo:{},newComment:"",rootComments:[],Count:"",result:""},getters:{},mutations:{saveVal(t,e){t.result=e},changeTokenObj(t,e){t.tokenObj=e,b(e)},changeUserInfo(t,e){t.userInfo=e},logout(t){t.tokenObj={},j()},setComment(t,e){t.rootComments.push(...e)},addComment(t,e){t.rootComments.unshift(e)},addCommentCount(t,e){t.Count=e},updateComment(t){t.rootComments=[]}},actions:{async reqUserInfo(t){if(!t.state.userInfo.name){const e=await A();t.commit("changeUserInfo",e.data.data)}}},modules:{}});const k=f().create({baseURL:"http://geek.itheima.net/"});k.interceptors.request.use((t=>(w.state.tokenObj.token&&(t.headers.Authorization="Bearer "+w.state.tokenObj.token),t)),(t=>{console.log(t)})),k.interceptors.response.use((t=>t),(async t=>{if(401===t.response.status)try{const e=await f()({url:" http://toutiao.itheima.net/v1_0/authorizations",method:"put",headers:{Authorization:"Bearer "+w.state.tokenObj.refresh_token}});return w.commit("changeTokenObj",{token:e.data.data.token,refresh_token:w.state.tokenObj.refresh_token}),k(t.config)}catch{h.Z.fail("登录失效，请重新登录"),qe.push("/login")}return Promise.reject(t)}));var C=k;const x=t=>C({url:"/v1_0/authorizations",method:"post",data:t}),Z=()=>C({url:"/v1_0/user/profile",headers:{Authorization:"Bearer "+w.state.tokenObj.token}}),S=t=>C({url:"/v1_0/user/profile",method:"patch",data:t}),$=t=>C({url:"/v1_0/user/photo",method:"patch",data:t}),I=()=>C({url:"/v1_0/user/channels"}),L=()=>C({url:"/v1_0/channels"}),O=t=>C({url:"/v1_0/user/channels",method:"put",data:t}),z=t=>C({url:"/v1_0/articles",params:t}),N=t=>C({url:"/v1_0/articles/"+t}),V=t=>C({url:"/v1_0/comments",params:t}),T=t=>C({url:"/v1_0/comments",method:"post",data:t}),E=t=>C({url:"/v1_0/suggestion",params:t}),D=t=>C({url:"/v1_0/search",params:t}),q=x,A=Z,M=S,U=$,F=I,H=z,P=N,B=V,R=T,J=L,K=O,Y=E,G=D;var W={name:"myLogin",data(){return{info:{mobile:"13800138000",code:"246810"},isLoading:!1,rules:{mobile:[{required:!0,message:"请填写手机号"},{pattern:/^1[2-9]\d{9}$/,message:"请填写正确的手机号"}],code:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"请输入6位数字验证码"}]}}},methods:{async onSubmit(){this.isLoading=!0;try{const t=await q(this.info);this.$store.commit("changeUserInfo",""),this.$store.commit("changeTokenObj",t.data.data),this.$toast.success("登录成功！"),this.$route.query.back?await this.$router.push(this.$route.query.back):await this.$router.push("/layout/home")}catch{this.$toast.fail("登录失败！")}this.isLoading=!1}}},Q=W,X=(0,l.Z)(Q,m,v,!1,null,"588b2320",null),tt=X.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view"),s("van-tabbar",{attrs:{route:""}},[s("van-tabbar-item",{attrs:{to:"/layout/home",icon:"home-o"}},[t._v("首页")]),s("van-tabbar-item",{attrs:{to:"/layout/ask",icon:"chat-o"}},[t._v("问答")]),s("van-tabbar-item",{attrs:{to:"/layout/video",icon:"video-o"}},[t._v("视频")]),s("van-tabbar-item",{attrs:{to:"/layout/mine",icon:"friends-o"}},[t._v("我的")])],1)],1)},st=[],at={name:"myLayout"},nt=at,it=(0,l.Z)(nt,et,st,!1,null,"076d46cb",null),ot=it.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{scopedSlots:t._u([{key:"left",fn:function(){return[s("div",{staticClass:"logo"})]},proxy:!0},{key:"right",fn:function(){return[s("van-button",{attrs:{round:"",icon:"search",type:"primary",to:"/search"}},[t._v("搜索")])]},proxy:!0}])}),s("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.ownChannels,(function(t){return s("van-tab",{key:t.id,attrs:{title:t.name}},[s("articleList",{attrs:{channel_id:t.id}})],1)})),s("div",{staticClass:"icon-wrap"},[s("van-icon",{attrs:{name:"wap-nav"},on:{click:function(e){t.showChannel=!0}}})],1)],2),s("router-view"),s("van-action-sheet",{attrs:{title:"频道管理"},model:{value:t.showChannel,callback:function(e){t.showChannel=e},expression:"showChannel"}},[s("channel-edit",{attrs:{ownChannels:t.ownChannels,allChannels:t.allChannels,value:t.active},on:{input:function(e){t.active=e},fixIndex:function(e){t.active--}}})],1)],1)},lt=[],ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"list",staticClass:"artList",on:{scroll:t.onScroll}},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return s("van-cell",{key:e.art_id,attrs:{to:"/articleDetail/"+e.art_id}},[s("div",{staticClass:"articleTitle"},[t._v(" "+t._s(e.title)+" ")]),s("van-grid",{attrs:{border:!1,"column-num":e.cover.type}},t._l(e.cover.images,(function(t,e){return s("van-grid-item",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"val"}],key:e},[s("van-image",{attrs:{src:t}})],1)})),1),s("div",{staticClass:"articleInfo"},[s("span",{staticClass:"author"},[t._v(t._s(e.aut_name))]),s("span",{staticClass:"comment"},[t._v(t._s(e.comm_count)+"评论")]),s("span",{staticClass:"date"},[t._v(t._s(t._f("relvTime")(e.pubdate)))])])],1)})),1)],1)],1)},ut=[],ht={props:["channel_id"],data(){return{list:[],loading:!1,finished:!1,timestamp:Date.now(),isLoading:!1,scrollTop:0}},activated(){this.$refs.list.scrollTop=this.scrollTop},methods:{onScroll(){this.scrollTop=this.$refs.list.scrollTop},async onRefresh(){(0,h.Z)("刷新成功");const t=await H({channel_id:this.channel_id,timestamp:this.timestamp});this.list=t.data.data.results,this.isLoading=!1},async onLoad(){const t=await H({channel_id:this.channel_id,timestamp:this.timestamp});this.list.push(...t.data.data.results),this.timestamp=t.data.data.pre_timestamp,this.loading=!1,null==this.list.length&&(this.finished=!0)}}},dt=ht,mt=(0,l.Z)(dt,ct,ut,!1,null,"3c00a2db",null),vt=mt.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"channel-edit"},[s("div",[s("div",{staticClass:"box-title"},[s("span",[t._v("我的频道")]),s("van-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){t.isShow=!t.isShow}}},[t._v(t._s(t.isShow?"取消":"编辑"))])],1),s("van-grid",t._l(t.ownChannels,(function(e,a){return s("van-grid-item",{key:e.id},[s("span",{class:{active:a===t.value},on:{click:function(e){return t.changeActive(a)}}},[t._v(t._s(e.name))]),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isShow&&"推荐"!==e.name,expression:"isShow &&item.name!=='推荐'"}],attrs:{name:"cross"},on:{click:function(e){return t.del(a)}}})],1)})),1)],1),s("div",{staticStyle:{"margin-top":"20px"}},[t._m(0),s("van-grid",t._l(t.optChannels,(function(e){return s("van-grid-item",{key:e.id,attrs:{text:e.name},on:{click:function(s){return t.addChannels(e)}}})})),1)],1)])},ft=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("可选频道")])])}],gt={props:{ownChannels:{type:Array,required:!0},allChannels:{type:Array,required:!0},value:{type:Number,required:!0}},data(){return{newChannel:this.ownChannels,isShow:!1}},computed:{optChannels(){return this.allChannels.filter((t=>!this.ownChannels.find((e=>e.id===t.id))))}},methods:{addChannels(t){this.newChannel.push(t),this.save(t)},async save(t){if(this.$store.state.tokenObj.token){const t=this.ownChannels.map(((t,e)=>({id:t.id,seq:e})));await K({channels:t})}else window.localStorage.setItem("HMTT81_CHANNELS",JSON.stringify(this.newChannel))},del(t){t<this.value?(this.$emit("fixIndex"),this.newChannel.splice(t,1),this.save()):(this.newChannel.splice(t,1),this.save())},changeActive(t){this.$emit("input",t),this.$emit("close"),this.save()}}},_t=gt,bt=(0,l.Z)(_t,pt,ft,!1,null,"5ab8d9ea",null),yt=bt.exports,jt={name:"myHome",components:{articleList:vt,channelEdit:yt},data(){return{ownChannels:[],allChannels:[],showChannel:!1,active:0}},async created(){const t=JSON.parse(window.localStorage.getItem("HMTT81_CHANNELS"));if(this.$store.state.tokenObj.token||!t){const t=await F();this.ownChannels=t.data.data.channels}else this.ownChannels=t;const e=await J();this.allChannels=e.data.data.channels},methods:{}},wt=jt,kt=(0,l.Z)(wt,rt,lt,!1,null,"446f1354",null),Ct=kt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v(" 问答 ")])},Zt=[],St={name:"myAsk"},$t=St,It=(0,l.Z)($t,xt,Zt,!1,null,"c12ce9f6",null),Lt=It.exports,Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v(" 视频 ")])},zt=[],Nt={name:"myVideo"},Vt=Nt,Tt=(0,l.Z)(Vt,Ot,zt,!1,null,"ba0660d4",null),Et=Tt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"profile-box"},[s("van-image",{attrs:{round:"",fit:"cover",src:t.userInfo.photo}}),s("div",{staticClass:"info-box"},[s("div",{staticClass:"userId"},[t._v(t._s(t.userInfo.name))]),s("div",{staticClass:"birth"},[t._v(t._s(t.userInfo.birthday))])])],1),s("van-row",[s("van-col",{attrs:{span:"8"}},[s("van-icon",{staticClass:"one",attrs:{name:"newspaper-o"}}),s("span",[t._v("我的作品")])],1),s("van-col",{attrs:{span:"8"}},[s("van-icon",{staticClass:"two",attrs:{name:"star-o"}}),s("span",[t._v("我的收藏")])],1),s("van-col",{staticClass:"three",attrs:{span:"8"}},[s("van-icon",{attrs:{name:"tosend"}}),s("span",[t._v("阅读历史")])],1)],1),s("van-cell-group",[s("van-cell",{attrs:{to:"/mine/edit",title:"编辑资料","is-link":"",icon:"edit"}}),s("van-cell",{attrs:{title:"小智同学","is-link":"",icon:"chat-o",to:"/mine/chat"}}),s("van-cell",{attrs:{title:"系统设置","is-link":"",icon:"setting-o"}}),s("van-cell",{attrs:{title:"退出登录","is-link":"",icon:"info-o"},on:{click:t.logout}})],1)],1)},qt=[],At={name:"MineEdit",computed:{...(0,g.rn)(["userInfo"])},created(){this.$store.dispatch("reqUserInfo")},methods:{logout(){this.$store.commit("logout"),this.$toast.success("成功退出"),this.$router.push("/login")}}},Mt=At,Ut=(0,l.Z)(Mt,Dt,qt,!1,null,"44874e7b",null),Ft=Ut.exports,Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"编辑资料","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),s("div",{staticClass:"userImage"},[s("van-image",{attrs:{round:"",fit:"cover",src:t.userInfo.photo}}),s("van-uploader",{attrs:{"after-read":t.afterRead}})],1),s("van-cell-group",[s("van-cell",{attrs:{title:"名称",value:t.userInfo.name,"is-link":""},on:{click:t.changeName}}),s("van-cell",{attrs:{title:"性别",value:t.userInfo.gender?"女":"男","is-link":""},on:{click:function(e){t.genderShow=!0}}}),s("van-cell",{attrs:{title:"生日",value:t.userInfo.birthday,"is-link":""},on:{click:t.showBirthday}})],1),s("van-dialog",{attrs:{title:"修改名字","show-cancel-button":""},on:{confirm:t.updateName},model:{value:t.nameShow,callback:function(e){t.nameShow=e},expression:"nameShow"}},[s("van-field",{ref:"txtName",attrs:{placeholder:""},model:{value:t.editName,callback:function(e){t.editName="string"===typeof e?e.trim():e},expression:"editName"}})],1),s("van-popup",{attrs:{position:"bottom"},model:{value:t.genderShow,callback:function(e){t.genderShow=e},expression:"genderShow"}},[s("van-nav-bar",{attrs:{title:"修改性别","left-text":"取消"},on:{"click-left":function(e){t.genderShow=!1}}}),s("van-cell",{attrs:{title:"男","is-link":""},on:{click:t.male}}),s("van-cell",{attrs:{title:"女","is-link":""},on:{click:t.fomale}})],1),s("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.birthShow,callback:function(e){t.birthShow=e},expression:"birthShow"}},[s("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.updateBirth,cancel:function(e){t.birthShow=!1}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.cropShow,expression:"cropShow"}],staticClass:"crop-box"},[s("vueCropper",{ref:"cropper",attrs:{img:t.img,autoCrop:"",autoCropWidth:"200",autoCropHeight:"200"}}),s("van-button",{attrs:{type:"primary"},on:{click:t.doCrop}},[t._v("裁剪")]),s("van-button",{staticStyle:{right:"0"},attrs:{type:"primary"},on:{click:function(e){t.cropShow=!1}}},[t._v("取消")])],1)],1)},Pt=[],Bt=s(7133),Rt=s.n(Bt),Jt=s(7086),Kt={name:"MineEdit",data(){return{nameShow:!1,editName:"",birthShow:!1,minDate:new Date(1950,0,1),maxDate:new Date,currentDate:"",genderShow:!1,genderChange:"",cropShow:!1,img:""}},components:{VueCropper:Jt.VueCropper},computed:{...(0,g.rn)(["userInfo"])},created(){this.$store.dispatch("reqUserInfo")},methods:{changeName(){this.nameShow=!0,this.editName=this.userInfo.name,setTimeout((()=>{this.$refs.txtName.focus()}),500)},async updateName(){if(""===this.editName)return this.$toast("修改名字不能为空");await M({name:this.editName}),this.$store.commit("changeUserInfo",{...this.userInfo,name:this.editName})},showBirthday(){this.birthShow=!0},async updateBirth(){const t=Rt()(this.currentDate).format("YYYY-MM-DD");await M({birthday:t}),this.birthShow=!1,this.$store.commit("changeUserInfo",{...this.userInfo,birthday:t})},async male(){this.genderShow=!1,await M({gender:this.genderChange=!1}),this.$store.commit("changeUserInfo",{...this.userInfo,gender:this.genderChange=!1})},async fomale(){this.genderShow=!1,await M({gender:this.genderChange=!0}),this.$store.commit("changeUserInfo",{...this.userInfo,gender:this.genderChange=!0})},afterRead(t){this.img=t.content,this.cropShow=!0},doCrop(){this.$refs.cropper.getCropBlob((async t=>{const e=new FormData;e.append("photo",t);const s=await U(e);this.$store.commit("changeUserInfo",{...this.info,photo:s.data.data.photo}),this.cropShow=!1}))}}},Yt=Kt,Gt=(0,l.Z)(Yt,Ht,Pt,!1,null,null,null),Wt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"article"}},[s("van-nav-bar",{attrs:{title:"文章详情","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(e){return t.$router.go(-1)}}}),s("div",{staticClass:"article"},[s("div",{staticClass:"article_title"},[s("h1",[t._v(t._s(t.detail.title))])]),s("div",{staticClass:"article_info"},[s("div",{staticClass:"left"},[s("van-image",{attrs:{round:"",fit:"cover",width:"100%",height:"100%",src:t.detail.aut_photo}})],1),s("div",{staticClass:"middle"},[s("h1",[t._v(t._s(t.detail.aut_name))]),s("span",[t._v(t._s(t._f("relvTime")(t.detail.pubdate)))])]),s("div",{staticClass:"right"},[s("van-button",{attrs:{icon:"plus",type:"primary",round:""}},[t._v("关注")])],1)]),s("div",{staticClass:"article_detail",domProps:{innerHTML:t._s(t.detail.content)}}),s("div",{staticClass:"end"},[s("van-divider",[t._v("end")]),s("div",{staticClass:"tool_chose"},[s("van-button",{attrs:{id:"like",icon:"good-job-o",round:""}},[t._v("点赞")]),s("van-button",{attrs:{id:"dislike",icon:"delete-o",round:""}},[t._v("不喜欢")])],1)],1),s("comment")],1),s("div",{staticClass:"commit"},[s("van-cell",[s("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},scopedSlots:t._u([{key:"button",fn:function(){return[s("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.sendComment}},[t._v("发布")])]},proxy:!0}]),model:{value:t.commentVal,callback:function(e){t.commentVal=e},expression:"commentVal"}})],1)],1)],1)},Xt=[],te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.rootComments,(function(e,a){return s("van-cell",{key:a},[[s("div",{staticClass:"commentArea"},[s("div",{staticClass:"left"},[s("van-image",{attrs:{round:"",fit:"cover",width:"100%",height:"100%",src:e.aut_photo}})],1),s("div",{staticClass:"middle"},[s("div",{staticClass:"author_name"},[t._v(t._s(e.aut_name))]),s("div",{staticClass:"comment_val"},[t._v(" "+t._s(e.content)+" ")]),s("div",{staticClass:"timer"},[s("span",[t._v(t._s(t._f("relvTime")(e.pubdate)))]),s("van-button",{on:{click:function(s){return t.reply(e)}}},[t._v("回复("+t._s(e.reply_count)+")")])],1)]),s("div",{staticClass:"right"},[s("van-icon",{attrs:{name:"like-o"}})],1)])]],2)})),1),s("van-action-sheet",{attrs:{title:"回复列表"},model:{value:t.replyShow,callback:function(e){t.replyShow=e},expression:"replyShow"}},[t.replyShow?s("reply-comment",{attrs:{currentItem:t.currentItem}}):t._e()],1)],1)},ee=[],se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"content",staticStyle:{padding:"16px 16px 160px"}},[s("van-cell",[[s("div",{staticClass:"commentArea"},[s("div",{staticClass:"left"},[s("van-image",{attrs:{round:"",fit:"cover",width:"100%",height:"100%",src:t.currentItem.aut_photo}})],1),s("div",{staticClass:"middle"},[s("div",{staticClass:"author_name"},[t._v(t._s(t.currentItem.aut_name))]),s("div",{staticClass:"comment_val"},[t._v(" "+t._s(t.currentItem.content)+" ")]),s("div",{staticClass:"timer"},[s("span",[t._v(t._s(t._f("relvTime")(t.currentItem.pubdate)))])])])])]],2),s("van-divider",[t._v("回复列表")]),s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return s("van-cell",{key:a},[[s("div",{staticClass:"commentArea"},[s("div",{staticClass:"left"},[s("van-image",{attrs:{round:"",fit:"cover",width:"100%",height:"100%",src:e.aut_photo}})],1),s("div",{staticClass:"middle"},[s("div",{staticClass:"author_name"},[t._v(t._s(e.aut_name))]),s("div",{staticClass:"comment_val"},[t._v(" "+t._s(e.content)+" ")]),s("div",{staticClass:"timer"},[s("span",[t._v(t._s(t._f("relvTime")(e.pubdate)))])])])])]],2)})),1),s("div",{staticClass:"commit"},[s("van-cell",[s("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},scopedSlots:t._u([{key:"button",fn:function(){return[s("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.send}},[t._v("发布")])]},proxy:!0}]),model:{value:t.commentVal,callback:function(e){t.commentVal=e},expression:"commentVal"}})],1)],1)],1)])},ae=[],ne={name:"replyComment",props:{currentItem:{type:Object,required:!0}},data(){return{list:[],loading:!1,finished:!1,offset:null,commentVal:""}},methods:{async onLoad(){this.loading=!1;const t=await B({type:"c",source:this.currentItem.com_id,offset:this.offset});this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},async send(){if(""===this.commentVal)return this.$toast("输入内容不能为空！");const t=await R({target:this.currentItem.com_id,content:this.commentVal,art_id:this.$route.params.id});this.list.unshift(...t.data.data.new_obj),this.commentVal="",this.$toast("回复成功")}}},ie=ne,oe=(0,l.Z)(ie,se,ae,!1,null,"24a23f41",null),re=oe.exports,le={name:"myComment",data(){return{list:[],loading:!1,finished:!1,offset:null,cmt:{},replyShow:!1,currentItem:{}}},components:{replyComment:re},computed:{...(0,g.rn)(["rootComments"])},created(){this.$store.commit("updateComment")},methods:{async onLoad(){const t=await B({type:"a",source:this.$route.params.id,offset:this.offset});this.cmt=t.data.data.results,this.$store.commit("setComment",this.cmt),this.offset=t.data.data.last_id,this.loading=!1,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},reply(t){this.replyShow=!0,this.currentItem=t}}},ce=le,ue=(0,l.Z)(ce,te,ee,!1,null,"0358a992",null),he=ue.exports,de={name:"articleDetail",components:{comment:he},data(){return{commentVal:"",detail:{},list:[]}},async created(){const t=await P(this.$route.params.id);this.detail=t.data.data},methods:{async sendComment(){if(""===this.commentVal)return void this.$toast("输入内容不能为空！");const t=await R({target:this.$route.params.id,content:this.commentVal});this.$store.commit("addComment",t.data.data.new_obj),this.commentVal=""}}},me=de,ve=(0,l.Z)(me,Qt,Xt,!1,null,"1bd4dedc",null),pe=ve.exports,fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"搜索中心","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),s("form",{attrs:{action:"/"}},[s("van-search",{attrs:{shape:"round","show-action":"",placeholder:"请输入搜索关键词"},on:{input:t.recording,search:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.textValue,callback:function(e){t.textValue=e},expression:"textValue"}})],1),s("van-cell",{directives:[{name:"show",rawName:"v-show",value:!t.resultShow,expression:"!resultShow"}],attrs:{value:"历史记录"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.resultShow,expression:"!resultShow"}],staticClass:"history"},t._l(t.historyList,(function(e,a){return s("van-cell",{key:a,attrs:{value:e},on:{click:function(s){return t.toGo(e)}}})})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.resultShow,expression:"resultShow"}],staticClass:"connection"},t._l(t.colorList,(function(e,a){return s("van-cell",{key:a,attrs:{icon:"search"}},[s("div",{domProps:{innerHTML:t._s(e)}},[t._v(t._s(e))])])})),1)],1)},ge=[],_e={name:"searchIndex",data(){return{textValue:"",historyList:JSON.parse(window.localStorage.getItem("history"))||[],resultList:[],resultShow:!1}},methods:{onSearch(){this.textValue&&(this.$router.push("/search/result/"+this.textValue),this.$store.commit("saveVal",this.textValue),this.historyList.includes(this.textValue)||(this.historyList.unshift(this.textValue),window.localStorage.setItem("history",JSON.stringify(this.historyList))))},async recording(){if(""!==this.textValue){this.resultShow=!0;const t=await Y({q:this.textValue});this.resultList=t.data.data.options}else this.resultShow=!1},toGo(t){this.textValue=t,this.onSearch()}},computed:{colorList(){return this.resultList.map((t=>{const e=new RegExp(this.textValue,"ig");return t.replace(e,`<span style="color:red">${this.textValue}</span>`)}))}}},be=_e,ye=(0,l.Z)(be,fe,ge,!1,null,"49c26372",null),je=ye.exports,we=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:t.$store.state.result+" 的搜索结果","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return s("van-cell",{key:t.art_id,attrs:{value:t.title,to:"/articleDetail/"+t.art_id}})})),1)],1)},ke=[],Ce={name:"searchResult",data(){return{list:[],loading:!1,finished:!1,page:1}},methods:{async onLoad(){const t=await G({q:this.$store.state.result,page:this.page});this.list.push(...t.data.data.results),this.page++,this.loading=!1,this.list.length>=t.data.data.total_count&&(this.finished=!0)}}},xe=Ce,Ze=(0,l.Z)(xe,we,ke,!1,null,"5eeedb25",null),Se=Ze.exports,$e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"小智同学"},on:{"click-left":function(e){return t.$router.back()}}}),s("div",{ref:"chatList",staticClass:"chat-list"},[t._l(t.list,(function(e,a){return[e.isMe?s("div",{key:a,staticClass:"chat-item right"},[s("div",{staticClass:"chat-pao my"},[t._v(t._s(e.msg))]),s("van-image",{attrs:{fit:"cover",round:"",src:"https://img.yzcdn.cn/vant/cat.jpeg"}})],1):s("div",{key:a,staticClass:"chat-item left"},[s("van-image",{attrs:{fit:"cover",round:"",src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F1115%2F101021113337%2F211010113337-6-1200.jpg&refer=http%3A%2F%2Fimg.jj20.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1653796439&t=25368161528ce302025d65bbe14c2db4"}}),s("div",{staticClass:"chat-pao"},[t._v(t._s(e.msg))])],1)]}))],2),s("div",{staticClass:"reply-container van-hairline--top"},[s("van-field",{attrs:{placeholder:"说点什么..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},model:{value:t.msg,callback:function(e){t.msg="string"===typeof e?e.trim():e},expression:"msg"}},[s("span",{staticStyle:{"font-size":"12px",color:"#999"},attrs:{slot:"button"},on:{click:t.send},slot:"button"},[t._v(" 提交 ")])])],1)],1)},Ie=[],Le=s(1693),Oe={name:"UserChat",data(){return{socket:null,msg:"",list:[]}},methods:{send(){if(!this.msg)return this.$toast("请输入内容");this.socket.emit("message",{msg:this.msg,timestamp:Date.now()}),this.list.push({isMe:!0,msg:this.msg}),this.$nextTick((()=>{this.$refs.chatList.scrollTop=this.$refs.chatList.scrollHeight})),this.msg=""}},created(){this.socket=(0,Le.io)("http://geek.itheima.net",{query:{token:this.$store.state.tokenObj.token},transports:["websocket"]}),this.socket.on("message",(t=>{this.list.push({isMe:!1,msg:t.msg}),this.$nextTick((()=>{this.$refs.chatList.scrollTop=this.$refs.chatList.scrollHeight}))}))}},ze=Oe,Ne=(0,l.Z)(ze,$e,Ie,!1,null,"5c1a2f19",null),Ve=Ne.exports;a.Z.use(d.Z);const Te=[{path:"/",redirect:"/layout/home"},{name:"login",path:"/login",component:tt},{name:"search",path:"/search",component:je},{name:"result",path:"/search/result/:key",component:Se,meta:{needKeep:!0}},{name:"edit",path:"/mine/edit",component:Wt,meta:{needLogin:!0}},{name:"chat",path:"/mine/chat",component:Ve},{name:"layout",path:"/layout",component:ot,children:[{name:"home",path:"home",component:Ct,meta:{needKeep:!0}},{name:"ask",path:"ask",component:Lt},{name:"video",path:"video",component:Et},{name:"mine",path:"mine",component:Ft,meta:{needLogin:!0}}]},{name:"articleDetail",path:"/articleDetail/:id",component:pe}],Ee=new d.Z({routes:Te}),De=d.Z.prototype.push;d.Z.prototype.push=function(t,e,s){return e||s?De.call(this,t,e,s):De.call(this,t).catch((t=>t))},Ee.beforeEach(((t,e,s)=>{t.meta.needLogin?w.state.tokenObj.token?s():(s({name:"login",query:{back:t.path}}),h.Z.fail("请先登录")):s()}));var qe=Ee,Ae=(s(1821),s(7542),s(1404)),Me=(s(5979),s(9851)),Ue=(s(6283),s(1197)),Fe=(s(8395),s(5263)),He=(s(8409),s(9138)),Pe=(s(4112),s(5731)),Be=(s(5758),s(5803)),Re=(s(6139),s(8235)),Je=(s(7057),s(1911)),Ke=(s(2943),s(7735)),Ye=(s(9735),s(520)),Ge=(s(4663),s(338)),We=(s(9497),s(7384)),Qe=(s(9035),s(9702)),Xe=(s(1031),s(6586)),ts=(s(4138),s(7129)),es=(s(8114),s(8033)),ss=(s(3257),s(9327)),as=(s(6278),s(7882)),ns=(s(9785),s(8862)),is=(s(5180),s(3316)),os=(s(4039),s(1660)),rs=(s(3738),s(68)),ls=(s(4870),s(4327)),cs=(s(4480),s(3594)),us=(s(8134),s(2084)),hs=(s(2314),s(1802));a.Z.use(hs.Z),a.Z.use(us.Z),a.Z.use(cs.Z),a.Z.use(ls.Z),a.Z.use(rs.Z),a.Z.use(os.Z),a.Z.use(is.Z),a.Z.use(ns.Z),a.Z.use(as.Z),a.Z.use(ss.Z),a.Z.use(es.Z),a.Z.use(ts.Z),a.Z.use(Xe.Z),a.Z.use(Qe.Z),a.Z.use(We.Z),a.Z.use(Ge.Z),a.Z.use(Ye.Z),a.Z.use(Ke.Z),a.Z.use(Je.Z),a.Z.use(Re.Z),a.Z.use(Be.Z),a.Z.use(Pe.Z),a.Z.use(He.Z),a.Z.use(Fe.Z),a.Z.use(Ue.Z),a.Z.use(Me.Z),a.Z.use(h.Z),a.Z.use(Ae.Z),a.Z.use(os.Z,{lazyComponent:!0}),Rt().locale("zh-cn"),a.Z.filter("relvTime",(t=>Rt()(t).fromNow())),a.Z.config.productionTip=!1,new a.Z({router:qe,store:w,render:t=>t(u)}).$mount("#app")}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,i){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],i=t[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,n,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,i,o=a[0],r=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var u=l(s)}for(e&&e(a);c<o.length;c++)i=o[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(u)},a=self["webpackChunktoutiao81"]=self["webpackChunktoutiao81"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(1176)}));a=s.O(a)})();
//# sourceMappingURL=app.bb236dca.js.map